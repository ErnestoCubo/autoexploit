param(
    [Parameter(Mandatory)][string]$option
)

function Import-Modules {

    param (
        [Parameter(Mandatory)][string]$module
    )
    
    try {
        Write-Host "[*]Importing modules please wait . . .`n" -ForegroundColor Yellow
        Import-Module -Name ( -join ((Get-Item .).Fullname, $module)) -Force
        Write-Host  ( -join ((Get-Item .).Fullname, $module), " module imported") -ForegroundColor Yellow
    }
    catch {
        Write-Host "Error al importar el m√≥dulo" -ForegroundColor Red
        Write-Error $_
    }

}

function main {

    param(
        [Parameter(Mandatory)][string]$option,
        [Parameter()][switch]$list = $false
    )

    switch -Wildcard ($option) {
        "enumScan" {
            Write-Host "Automatic recon scanner mode selected`n" -ForegroundColor Green
            Import-Modules -module \auto_module.psm1
            Start-Sleep -Seconds 3
            enumerateTarget
            
        }
        "privScan" {
            Write-Host "Privilege escalation scanner selected`n" -ForegroundColor Green
            Import-Modules -module \privEsc.psm1
            privScanner
        }
        "help" {
            Write-Host "Help menu `n The options available are auto mode or manual config mode: `n -auto: automatic recon of the actual system `n -privScan launch a privele escalation scanner "   -ForegroundColor Green
        }
        Default {
            Write-Host -NoNewline "Invalid option usage:" -ForegroundColor Red
            Write-Host "`n -option help for help `n -option auto for automatic audit `n -option manual for manual audit" -ForegroundColor Red
            
        }
    }

}

main -option $option